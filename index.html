<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>統測英文通關寶典 - 台南高商劉翔承製作</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --secondary-color: #059669;
            --accent-color: #dc2626;
            --background-color: #f8fafc;
            --card-color: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .navbar h1 {
            font-size: 1.8rem;
            color: white;
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .nav-links button {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 9999px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            font-weight: 500;
        }
        
        .nav-links button:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }
        
        .nav-links button.active {
            background: white;
            color: var(--primary-color);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--card-color);
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card h3 {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .stat-card .number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
    </style>
</head>
<style>
    .section {
        display: none;
        background: var(--card-color);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 15px rgba(0,0,0,0.05);
    }
    
    .section.active {
        display: block;
        animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .search-container {
        position: relative;
        margin-bottom: 2rem;
    }
    
    .search-bar {
        width: 100%;
        padding: 1rem 1.5rem;
        border: 2px solid #e2e8f0;
        border-radius: 9999px;
        font-size: 1rem;
        transition: all 0.3s ease;
        outline: none;
    }
    
    .search-bar:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    
    .word-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }
    
    .word-card {
        background: var(--card-color);
        border: 1px solid #e2e8f0;
        border-radius: 1rem;
        padding: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }
    
    .word-card:hover {
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transform: translateY(-3px);
    }
    
    .word-card h3 {
        font-size: 1.5rem;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }
    
    .word-card .phonetic {
        color: var(--text-secondary);
        font-family: monospace;
        font-size: 0.9rem;
    }
    
    .exam-tag {
        display: inline-block;
        background: var(--primary-color);
        color: white;
        padding: 0.3rem 0.8rem;
        border-radius: 9999px;
        font-size: 0.8rem;
        margin-top: 0.5rem;
    }
    
    .translation {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px dashed #e2e8f0;
        display: none;
    }
    
    .translation.show {
        display: block;
        animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .grammar-section {
        background: #f8fafc;
        padding: 2rem;
        border-radius: 1rem;
        margin-bottom: 2rem;
    }
    
    .grammar-point {
        background: white;
        padding: 1.5rem;
        border-radius: 1rem;
        margin-bottom: 1.5rem;
        border: 1px solid #e2e8f0;
    }
    
    .grammar-point h3 {
        color: var(--primary-color);
        margin-bottom: 1rem;
        font-size: 1.2rem;
    }
    
    .example {
        background: #f1f5f9;
        padding: 1rem;
        border-radius: 0.5rem;
        margin: 0.5rem 0;
    }
    
    .quiz-container {
        background: white;
        padding: 2rem;
        border-radius: 1rem;
        margin-bottom: 2rem;
    }
    
    .quiz-question {
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
    }
    
    .quiz-options {
        display: grid;
        gap: 1rem;
    }
    
    .quiz-option {
        padding: 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .quiz-option:hover {
        background: #f8fafc;
        border-color: var(--primary-color);
    }
    
    .quiz-option.correct {
        background: #dcfce7;
        border-color: var(--success-color);
    }
    
    .quiz-option.wrong {
        background: #fee2e2;
        border-color: var(--error-color);
    }
    
    .progress-bar {
        height: 8px;
        background: #e2e8f0;
        border-radius: 9999px;
        margin: 2rem 0;
        overflow: hidden;
    }
    
    .progress {
        height: 100%;
        background: var(--primary-color);
        transition: width 0.3s ease;
    }
</style>
<style>
    .flashcard-container {
        perspective: 1000px;
        margin-bottom: 2rem;
    }
    
    .flashcard {
        position: relative;
        width: 100%;
        height: 200px;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        cursor: pointer;
    }
    
    .flashcard.flipped {
        transform: rotateY(180deg);
    }
    
    .flashcard-front,
    .flashcard-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        border-radius: 1rem;
        padding: 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .flashcard-front {
        background: white;
        color: var(--primary-color);
    }
    
    .flashcard-back {
        background: var(--primary-color);
        color: white;
        transform: rotateY(180deg);
    }
    
    .practice-section {
        margin-top: 2rem;
    }
    
    .practice-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .practice-controls {
        display: flex;
        gap: 1rem;
    }
    
    .timer {
        font-size: 1.2rem;
        font-weight: 500;
        color: var(--text-secondary);
    }
    
    .score-display {
        background: var(--primary-light);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        font-weight: 500;
    }
    
    .answer-feedback {
        text-align: center;
        margin: 1rem 0;
        padding: 1rem;
        border-radius: 0.5rem;
        font-weight: 500;
    }
    
    .answer-feedback.correct {
        background: var(--success-color);
        color: white;
    }
    
    .answer-feedback.incorrect {
        background: var(--error-color);
        color: white;
    }
    
    .vocabulary-list {
        display: grid;
        gap: 1rem;
        margin-top: 1rem;
    }
    
    .vocabulary-item {
        background: white;
        padding: 1rem;
        border-radius: 0.5rem;
        border: 1px solid #e2e8f0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .vocabulary-item:hover {
        border-color: var(--primary-color);
    }
    
    .vocabulary-info {
        flex: 1;
    }
    
    .vocabulary-actions {
        display: flex;
        gap: 0.5rem;
    }
    
    .btn-icon {
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
    }
    
    .btn-icon:hover {
        background: #f1f5f9;
        color: var(--primary-color);
    }
    
    .modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }
    
    .modal.active {
        opacity: 1;
        visibility: visible;
    }
    
    .modal-content {
        background: white;
        padding: 2rem;
        border-radius: 1rem;
        width: 90%;
        max-width: 500px;
        transform: translateY(20px);
        transition: all 0.3s ease;
    }
    
    .modal.active .modal-content {
        transform: translateY(0);
    }
    
    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .modal-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-primary);
    }
    
    .modal-close {
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 0.5rem;
        font-size: 1.5rem;
    }
</style>
<style>
    .notification {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: white;
        padding: 1rem 1.5rem;
        border-radius: 1rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 1rem;
        transform: translateY(100px);
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1000;
    }
    
    .notification.show {
        transform: translateY(0);
        opacity: 1;
    }
    
    .notification.success {
        border-left: 4px solid var(--success-color);
    }
    
    .notification.error {
        border-left: 4px solid var(--error-color);
    }
    
    .notification.info {
        border-left: 4px solid var(--primary-color);
    }
    
    .notification-icon {
        font-size: 1.5rem;
    }
    
    .notification-content {
        flex: 1;
    }
    
    .notification-title {
        font-weight: 600;
        margin-bottom: 0.25rem;
    }
    
    .notification-message {
        color: var(--text-secondary);
        font-size: 0.9rem;
    }
    
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    
    .loading {
        display: inline-block;
        width: 2rem;
        height: 2rem;
        border: 3px solid #f3f3f3;
        border-top: 3px solid var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @media (max-width: 768px) {
        .dashboard {
            grid-template-columns: 1fr;
        }
        
        .word-grid {
            grid-template-columns: 1fr;
        }
        
        .notification {
            left: 1rem;
            right: 1rem;
            bottom: 1rem;
        }
    }
</style>

<body>
    <nav class="navbar">
        <h1>統測英文通關寶典</h1>
        <div class="nav-links">
            <button class="active">單字學習</button>
            <button>文法練習</button>
            <button>模擬測驗</button>
            <button>學習進度</button>
        </div>
    </nav>

    <div class="container">
        <div class="dashboard">
            <div class="stat-card">
                <h3>已學習單字</h3>
                <div class="number">358</div>
            </div>
            <div class="stat-card">
                <h3>完成測驗</h3>
                <div class="number">24</div>
            </div>
            <div class="stat-card">
                <h3>平均正確率</h3>
                <div class="number">85%</div>
            </div>
        </div>

        <div class="section active" id="vocabulary">
            <div class="search-container">
                <input type="text" class="search-bar" placeholder="搜尋單字或翻譯...">
            </div>
            <div class="word-grid">
                <!-- 單字卡片將由JavaScript動態生成 -->
            </div>
        </div>

        <div class="section" id="grammar">
            <div class="grammar-section">
                <!-- 文法內容將由JavaScript動態生成 -->
            </div>
        </div>

        <div class="section" id="quiz">
            <div class="quiz-container">
                <!-- 測驗內容將由JavaScript動態生成 -->
            </div>
        </div>

        <div class="section" id="progress">
            <div class="progress-bar">
                <div class="progress" style="width: 65%"></div>
            </div>
            <!-- 進度內容將由JavaScript動態生成 -->
        </div>
    </div>
</body>
<script>
// 全域變數和常數定義
const VOCABULARY_DATA = [
    {
        word: "abandon",
        phonetic: "/əˈbændən/",
        translation: "放棄，遺棄",
        examples: ["He decided to abandon the project.", "The building was abandoned years ago."],
        examHistory: ["統測2022", "統測2020"]
    },
    {
        word: "brilliant",
        phonetic: "/ˈbrɪljənt/",
        translation: "傑出的，燦爛的",
        examples: ["She had a brilliant idea.", "The sun was brilliant in the clear sky."],
        examHistory: ["統測2023"]
    },
    // 可以繼續添加更多單字...
];

const GRAMMAR_DATA = [
    {
        title: "現在完成式",
        explanation: "用於表示過去發生且與現在有關連的動作或狀態",
        structure: "have/has + past participle",
        examples: [
            "I have finished my homework.",
            "She has lived here for ten years.",
            "They have never been to Japan."
        ],
        commonMistakes: [
            "誤用simple past代替present perfect",
            "忘記變化動詞的過去分詞形式"
        ]
    },
    // 可以繼續添加更多文法點...
];

const QUIZ_DATA = [
    {
        question: "Choose the correct form of the verb:",
        sentence: "She _____ in London for five years.",
        options: ["lives", "lived", "has lived", "was living"],
        correct: 2,
        explanation: "使用現在完成式，因為這是一個從過去開始持續到現在的動作。"
    },
    // 可以繼續添加更多題目...
];

// DOM 元素
const navButtons = document.querySelectorAll('.nav-links button');
const sections = document.querySelectorAll('.section');
const searchBar = document.querySelector('.search-bar');
const wordGrid = document.querySelector('.word-grid');

// 導航功能
function switchSection(index) {
    navButtons.forEach(btn => btn.classList.remove('active'));
    navButtons[index].classList.add('active');
    
    sections.forEach(section => section.classList.remove('active'));
    sections[index].classList.add('active');
}

navButtons.forEach((button, index) => {
    button.addEventListener('click', () => switchSection(index));
});

// 單字卡片生成功能
function createWordCard(wordData) {
    const card = document.createElement('div');
    card.className = 'word-card';
    
    card.innerHTML = `
        <h3>${wordData.word}</h3>
        <div class="phonetic">${wordData.phonetic}</div>
        ${wordData.examHistory.map(exam => `<span class="exam-tag">${exam}</span>`).join(' ')}
        <div class="translation">${wordData.translation}
            <div class="examples">
                ${wordData.examples.map(example => `<p>• ${example}</p>`).join('')}
            </div>
        </div>
    `;
    
    card.addEventListener('click', () => {
        const translation = card.querySelector('.translation');
        translation.classList.toggle('show');
    });
    
    return card;
}

// 搜尋功能
function filterWords(searchTerm) {
    const filteredWords = VOCABULARY_DATA.filter(word => 
        word.word.toLowerCase().includes(searchTerm.toLowerCase()) ||
        word.translation.includes(searchTerm)
    );
    
    wordGrid.innerHTML = '';
    filteredWords.forEach(word => {
        wordGrid.appendChild(createWordCard(word));
    });
}

searchBar.addEventListener('input', (e) => filterWords(e.target.value));

// 初始化頁面
function initializePage() {
    // 載入初始單字
    VOCABULARY_DATA.forEach(word => {
        wordGrid.appendChild(createWordCard(word));
    });
    
    // 更新統計數據
    updateStatistics();
}
<script>
// 統計數據更新功能
function updateStatistics() {
    const learnedWords = document.querySelector('.stat-card:nth-child(1) .number');
    const completedQuizzes = document.querySelector('.stat-card:nth-child(2) .number');
    const averageAccuracy = document.querySelector('.stat-card:nth-child(3) .number');
    
    // 從 localStorage 獲取學習進度數據
    const progress = JSON.parse(localStorage.getItem('learningProgress')) || {
        learnedWords: 0,
        quizzes: 0,
        accuracy: 0
    };
    
    learnedWords.textContent = progress.learnedWords;
    completedQuizzes.textContent = progress.quizzes;
    averageAccuracy.textContent = `${progress.accuracy}%`;
}

// 閃卡學習功能
class FlashcardSystem {
    constructor(words) {
        this.words = words;
        this.currentIndex = 0;
        this.container = document.querySelector('.flashcard-container');
    }
    
    createFlashcard(wordData) {
        return `
            <div class="flashcard">
                <div class="flashcard-front">
                    ${wordData.word}
                </div>
                <div class="flashcard-back">
                    ${wordData.translation}
                </div>
            </div>
        `;
    }
    
    next() {
        if (this.currentIndex < this.words.length - 1) {
            this.currentIndex++;
            this.showCurrent();
        }
    }
    
    previous() {
        if (this.currentIndex > 0) {
            this.currentIndex--;
            this.showCurrent();
        }
    }
    
    showCurrent() {
        this.container.innerHTML = this.createFlashcard(this.words[this.currentIndex]);
        const flashcard = this.container.querySelector('.flashcard');
        
        flashcard.addEventListener('click', () => {
            flashcard.classList.toggle('flipped');
        });
    }
}

// 測驗系統
class QuizSystem {
    constructor(quizData) {
        this.quizData = quizData;
        this.currentQuestionIndex = 0;
        this.score = 0;
        this.container = document.querySelector('.quiz-container');
    }
    
    showQuestion() {
        const question = this.quizData[this.currentQuestionIndex];
        this.container.innerHTML = `
            <div class="quiz-question">${question.sentence}</div>
            <div class="quiz-options">
                ${question.options.map((option, index) => `
                    <div class="quiz-option" data-index="${index}">
                        ${option}
                    </div>
                `).join('')}
            </div>
        `;
        
        this.container.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', (e) => this.checkAnswer(parseInt(e.target.dataset.index)));
        });
    }
    
    checkAnswer(selectedIndex) {
        const question = this.quizData[this.currentQuestionIndex];
        const options = this.container.querySelectorAll('.quiz-option');
        
        options.forEach(option => option.style.pointerEvents = 'none');
        
        if (selectedIndex === question.correct) {
            options[selectedIndex].classList.add('correct');
            this.score++;
        } else {
            options[selectedIndex].classList.add('wrong');
            options[question.correct].classList.add('correct');
        }
        
        setTimeout(() => this.nextQuestion(), 1500);
    }
    
    nextQuestion() {
        this.currentQuestionIndex++;
        if (this.currentQuestionIndex < this.quizData.length) {
            this.showQuestion();
        } else {
            this.showResults();
        }
    }
    
    showResults() {
        const percentage = (this.score / this.quizData.length) * 100;
        this.container.innerHTML = `
            <div class="quiz-results">
                <h2>測驗完成！</h2>
                <p>得分: ${this.score}/${this.quizData.length}</p>
                <p>正確率: ${percentage}%</p>
                <button class="btn-primary" onclick="startNewQuiz()">重新測驗</button>
            </div>
        `;
        
        // 更新學習進度
        this.updateProgress(percentage);
    }
    
    updateProgress(accuracy) {
        const progress = JSON.parse(localStorage.getItem('learningProgress')) || {
            learnedWords: 0,
            quizzes: 0,
            accuracy: 0
        };
        
        progress.quizzes++;
        progress.accuracy = Math.round((progress.accuracy * (progress.quizzes - 1) + accuracy) / progress.quizzes);
        
        localStorage.setItem('learningProgress', JSON.stringify(progress));
        updateStatistics();
    }
}

// 通知系統
class NotificationSystem {
    static show(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
            <div class="notification-content">
                <div class="notification-message">${message}</div>
            </div>
        `;
        
        document.body.appendChild(notification);
        setTimeout(() => notification.classList.add('show'), 100);
        
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }
}
<script>
// 進度追蹤系統
class ProgressTracker {
    constructor() {
        this.progressBar = document.querySelector('.progress-bar .progress');
        this.progressSection = document.querySelector('#progress');
    }
    
    updateProgress() {
        const progress = JSON.parse(localStorage.getItem('learningProgress')) || {
            learnedWords: 0,
            quizzes: 0,
            accuracy: 0
        };
        
        const totalWords = VOCABULARY_DATA.length;
        const progressPercentage = (progress.learnedWords / totalWords) * 100;
        
        this.progressBar.style.width = `${progressPercentage}%`;
        
        this.progressSection.innerHTML += `
            <div class="progress-details">
                <h3>詳細進度</h3>
                <div class="progress-item">
                    <span>單字學習進度</span>
                    <span>${progress.learnedWords}/${totalWords} (${Math.round(progressPercentage)}%)</span>
                </div>
                <div class="progress-item">
                    <span>完成測驗次數</span>
                    <span>${progress.quizzes}</span>
                </div>
                <div class="progress-item">
                    <span>平均正確率</span>
                    <span>${progress.accuracy}%</span>
                </div>
            </div>
        `;
    }
}

// 音訊播放功能
class AudioPlayer {
    static play(word) {
        const utterance = new SpeechSynthesisUtterance(word);
        utterance.lang = 'en-US';
        speechSynthesis.speak(utterance);
    }
}

// 本地存儲功能
class StorageManager {
    static saveProgress(progress) {
        localStorage.setItem('learningProgress', JSON.stringify(progress));
    }
    
    static getProgress() {
        return JSON.parse(localStorage.getItem('learningProgress')) || {
            learnedWords: 0,
            quizzes: 0,
            accuracy: 0
        };
    }
    
    static saveWordStatus(wordId, status) {
        const wordStatuses = this.getWordStatuses();
        wordStatuses[wordId] = status;
        localStorage.setItem('wordStatuses', JSON.stringify(wordStatuses));
    }
    
    static getWordStatuses() {
        return JSON.parse(localStorage.getItem('wordStatuses')) || {};
    }
}

// 事件監聽器設置
function setupEventListeners() {
    // 單字發音
    document.querySelectorAll('.word-card h3').forEach(wordHeader => {
        wordHeader.addEventListener('click', (e) => {
            e.stopPropagation();
            AudioPlayer.play(wordHeader.textContent);
        });
    });
    
    // 單字標記為已學習
    document.querySelectorAll('.word-card').forEach(card => {
        const word = card.querySelector('h3').textContent;
        card.addEventListener('dblclick', () => {
            const progress = StorageManager.getProgress();
            if (!card.classList.contains('learned')) {
                card.classList.add('learned');
                progress.learnedWords++;
                NotificationSystem.show(`${word} 已標記為已學習！`, 'success');
            }
            StorageManager.saveProgress(progress);
            updateStatistics();
        });
    });
}

// 頁面初始化
function initializeApp() {
    // 初始化各個系統
    const flashcards = new FlashcardSystem(VOCABULARY_DATA);
    const quiz = new QuizSystem(QUIZ_DATA);
    const progress = new ProgressTracker();
    
    // 載入初始內容
    flashcards.showCurrent();
    progress.updateProgress();
    
    // 設置事件監聽器
    setupEventListeners();
    
    // 檢查是否為首次訪問
    if (!localStorage.getItem('firstVisit')) {
        showWelcomeModal();
        localStorage.setItem('firstVisit', 'true');
    }
}

// 歡迎模態框
function showWelcomeModal() {
    const modal = document.createElement('div');
    modal.className = 'modal';
    modal.innerHTML = `
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">歡迎使用統測英文通關寶典！</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>這是您的個人英文學習助手，幫助您：</p>
                <ul>
                    <li>系統化學習統測常考單字</li>
                    <li>掌握重要文法概念</li>
                    <li>進行模擬測驗</li>
                    <li>追蹤學習進度</li>
                </ul>
                <p>準備好開始學習了嗎？</p>
            </div>
            <button class="btn-primary">開始學習</button>
        </div>
    `;
    
    document.body.appendChild(modal);
    setTimeout(() => modal.classList.add('active'), 100);
    
    modal.querySelector('.btn-primary').addEventListener('click', () => {
        modal.classList.remove('active');
        setTimeout(() => modal.remove(), 300);
    });
    
    modal.querySelector('.modal-close').addEventListener('click', () => {
        modal.classList.remove('active');
        setTimeout(() => modal.remove(), 300);
    });
}

// 啟動應用
document.addEventListener('DOMContentLoaded', initializeApp);

// 錯誤處理
window.onerror = function(msg, url, lineNo, columnNo, error) {
    NotificationSystem.show('發生錯誤，請重新整理頁面', 'error');
    console.error('Error: ', msg, '\nURL: ', url, '\nLine: ', lineNo, '\nColumn: ', columnNo, '\nError object: ', error);
    return false;
};
</script>
